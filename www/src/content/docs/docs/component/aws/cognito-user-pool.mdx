---
title: CognitoUserPool
description: Reference doc for the `sst.aws.CognitoUserPool` component.
---

{/* DO NOT EDIT. AUTO-GENERATED FROM "platform/src/components/aws/cognito-user-pool.ts" */}

import Segment from '../../../../../../src/components/tsdoc/Segment.astro';
import Section from '../../../../../../src/components/tsdoc/Section.astro';
import NestedTitle from '../../../../../../src/components/tsdoc/NestedTitle.astro';
import InlineSection from '../../../../../../src/components/tsdoc/InlineSection.astro';

<div class="tsdoc">

<Section type="about">
The `CognitoUserPool` component lets you add a [Amazon Cognito User Pool](https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-identity-pools.html) to your app.

#### Create the user pool

```ts title="sst.config.ts"
const userPool = new sst.aws.CognitoUserPool("MyUserPool");
```

#### Login using email

```ts title="sst.config.ts"
new sst.aws.CognitoUserPool("MyUserPool", {
  usernames: ["email"]
});
```

#### Configure triggers

```ts title="sst.config.ts"
new sst.aws.CognitoUserPool("MyUserPool", {
  triggers: {
    preAuthentication: "src/preAuthentication.handler",
    postAuthentication: "src/postAuthentication.handler",
  },
});
```

#### Add a client

```ts title="sst.config.ts"
userPool.addClient("Web");
```
</Section>

---

## Constructor

<Segment>
<Section type="signature">
```ts
new CognitoUserPool(name, args?, opts?)
```
</Section>

<Section type="parameters">
#### Parameters
- <p><code class="key">name</code> <code class="primitive">string</code></p>
- <p><code class="key">args?</code> [<code class="type">CognitoUserPoolArgs</code>](#cognitouserpoolargs)</p>
- <p><code class="key">opts?</code> [<code class="type">ComponentResourceOptions</code>](https://www.pulumi.com/docs/concepts/options/)</p>
</Section>
</Segment>

## CognitoUserPoolArgs
### aliases?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">email</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">phone</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">preferred_username</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** User can only sign in with their username.
</InlineSection>
Configure the different ways a user can sign in besides using their username.

:::note
You cannot change the aliases property once the User Pool has been created.
Learn more about [aliases](https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-settings-attributes.html#user-pool-settings-aliases).
:::

```ts
{
  aliases: ["email"]
}
```
</Segment>
### transform?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Object</code>
</InlineSection>
- <p>[<code class="key">userPool?</code>](#transform-userpool)</p>
</Section>
[Transform](/docs/components#transform) how this component creates its underlying
resources.

</Segment>
<NestedTitle id="transform-userpool" Tag="h4" parent="transform.">userPool?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">UserPoolArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/cognito/userpool/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">UserPoolArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/cognito/userpool/#inputs)<code class="symbol">, </code><code class="primitive">opts</code><code class="symbol">: </code>[<code class="type">ComponentResourceOptions</code>](https://www.pulumi.com/docs/concepts/options/)<code class="symbol">, </code><code class="primitive">name</code><code class="symbol">: </code><code class="primitive">string</code><code class="symbol">)</code><code class="symbol"> => </code><code class="primitive">void</code>
</InlineSection>
</Section>
Transform the Cognito User Pool resource.

</Segment>
### triggers?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">createAuthChallenge?</code>](#triggers-createauthchallenge)</p>
- <p>[<code class="key">customEmailSender?</code>](#triggers-customemailsender)</p>
- <p>[<code class="key">customMessage?</code>](#triggers-custommessage)</p>
- <p>[<code class="key">customSmsSender?</code>](#triggers-customsmssender)</p>
- <p>[<code class="key">defineAuthChallenge?</code>](#triggers-defineauthchallenge)</p>
- <p>[<code class="key">kmsKey?</code>](#triggers-kmskey)</p>
- <p>[<code class="key">postAuthentication?</code>](#triggers-postauthentication)</p>
- <p>[<code class="key">postConfirmation?</code>](#triggers-postconfirmation)</p>
- <p>[<code class="key">preAuthentication?</code>](#triggers-preauthentication)</p>
- <p>[<code class="key">preSignUp?</code>](#triggers-presignup)</p>
- <p>[<code class="key">preTokenGeneration?</code>](#triggers-pretokengeneration)</p>
- <p>[<code class="key">userMigration?</code>](#triggers-usermigration)</p>
- <p>[<code class="key">verifyAuthChallengeResponse?</code>](#triggers-verifyauthchallengeresponse)</p>
</Section>

<InlineSection>
**Default** No triggers
</InlineSection>
Configure triggers for this User Pool

```js
{
  triggers: {
    preAuthentication: "src/preAuthentication.handler",
    postAuthentication: "src/postAuthentication.handler"
  }
}
```
</Segment>
<NestedTitle id="triggers-createauthchallenge" Tag="h4" parent="triggers.">createAuthChallenge?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code><code class="symbol"> | </code>[<code class="type">FunctionArgs</code>](/docs/component/aws/function/#functionargs)
</InlineSection>
</Section>
Triggered after the user successfully responds to the previous challenge, and a new
challenge needs to be created.

Takes the handler path or the function args.

</Segment>
<NestedTitle id="triggers-customemailsender" Tag="h4" parent="triggers.">customEmailSender?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code><code class="symbol"> | </code>[<code class="type">FunctionArgs</code>](/docs/component/aws/function/#functionargs)
</InlineSection>
</Section>
Triggered during events like user sign-up, password recovery, email/phone number
verification, and when an admin creates a user. Use this trigger to customize the
email provider.

Takes the handler path or the function args.

</Segment>
<NestedTitle id="triggers-custommessage" Tag="h4" parent="triggers.">customMessage?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code><code class="symbol"> | </code>[<code class="type">FunctionArgs</code>](/docs/component/aws/function/#functionargs)
</InlineSection>
</Section>
Triggered during events like user sign-up, password recovery, email/phone number
verification, and when an admin creates a user. Use this trigger to customize the
message that is sent to your users.

Takes the handler path or the function args.

</Segment>
<NestedTitle id="triggers-customsmssender" Tag="h4" parent="triggers.">customSmsSender?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code><code class="symbol"> | </code>[<code class="type">FunctionArgs</code>](/docs/component/aws/function/#functionargs)
</InlineSection>
</Section>
Triggered when an SMS message needs to be sent, such as for MFA or verification codes.
Use this trigger to customize the SMS provider.

Takes the handler path or the function args.

</Segment>
<NestedTitle id="triggers-defineauthchallenge" Tag="h4" parent="triggers.">defineAuthChallenge?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code><code class="symbol"> | </code>[<code class="type">FunctionArgs</code>](/docs/component/aws/function/#functionargs)
</InlineSection>
</Section>
Triggered after each challenge response to determine the next action. Evaluates whether the
user has completed the authentication process or if additional challenges are needed.
ARN of the lambda function to name a custom challenge.

Takes the handler path or the function args.

</Segment>
<NestedTitle id="triggers-kmskey" Tag="h4" parent="triggers.">kmsKey?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code>
</InlineSection>
</Section>
The ARN of the AWS KMS key used for encryption.

When `customEmailSender` or `customSmsSender` are configured, Cognito encrypts the
verification code and temporary passwords before sending them to your Lambda functions.

</Segment>
<NestedTitle id="triggers-postauthentication" Tag="h4" parent="triggers.">postAuthentication?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code><code class="symbol"> | </code>[<code class="type">FunctionArgs</code>](/docs/component/aws/function/#functionargs)
</InlineSection>
</Section>
Triggered after a successful authentication event. Use this to perform custom actions,
such as logging or modifying user attributes, after the user is authenticated.

Takes the handler path or the function args.

</Segment>
<NestedTitle id="triggers-postconfirmation" Tag="h4" parent="triggers.">postConfirmation?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code><code class="symbol"> | </code>[<code class="type">FunctionArgs</code>](/docs/component/aws/function/#functionargs)
</InlineSection>
</Section>
Triggered after a user is successfully confirmed; sign-up or email/phone number
verification. Use this to perform additional actions, like sending a welcome email or
initializing user data, after user confirmation.

Takes the handler path or the function args.

</Segment>
<NestedTitle id="triggers-preauthentication" Tag="h4" parent="triggers.">preAuthentication?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code><code class="symbol"> | </code>[<code class="type">FunctionArgs</code>](/docs/component/aws/function/#functionargs)
</InlineSection>
</Section>
Triggered before the authentication process begins. Use this to implement custom
validation or checks (like checking if the user is banned) before continuing
authentication.

Takes the handler path or the function args.

</Segment>
<NestedTitle id="triggers-presignup" Tag="h4" parent="triggers.">preSignUp?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code><code class="symbol"> | </code>[<code class="type">FunctionArgs</code>](/docs/component/aws/function/#functionargs)
</InlineSection>
</Section>
Triggered before the user sign-up process completes. Use this to perform custom
validation, auto-confirm users, or auto-verify attributes based on custom logic.

Takes the handler path or the function args.

</Segment>
<NestedTitle id="triggers-pretokengeneration" Tag="h4" parent="triggers.">preTokenGeneration?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code><code class="symbol"> | </code>[<code class="type">FunctionArgs</code>](/docs/component/aws/function/#functionargs)
</InlineSection>
</Section>
Triggered before tokens are generated in the authentication process. Use this to
customize or add claims to the tokens that will be generated and returned to the user.

Takes the handler path or the function args.

</Segment>
<NestedTitle id="triggers-usermigration" Tag="h4" parent="triggers.">userMigration?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code><code class="symbol"> | </code>[<code class="type">FunctionArgs</code>](/docs/component/aws/function/#functionargs)
</InlineSection>
</Section>
Triggered when a user attempts to sign in but does not exist in the current user pool.
Use this to import and validate users from an existing user directory into the
Cognito User Pool during sign-in.

Takes the handler path or the function args.

</Segment>
<NestedTitle id="triggers-verifyauthchallengeresponse" Tag="h4" parent="triggers.">verifyAuthChallengeResponse?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code><code class="symbol"> | </code>[<code class="type">FunctionArgs</code>](/docs/component/aws/function/#functionargs)
</InlineSection>
</Section>
Triggered after the user responds to a custom authentication challenge. Use this to
verify the user's response to the challenge and determine whether to continue
authenticating the user.

Takes the handler path or the function args.

</Segment>
### usernames?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">email</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">phone</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** User can only sign in with their username.
</InlineSection>
Allow users to be able to sign up and sign in with an email addresses or phone number
as their username.

:::note
You cannot change the usernames property once the User Pool has been created.
Learn more about [aliases](https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-settings-attributes.html#user-pool-settings-aliases).
:::

```ts
{
  usernames: ["email"]
}
```
</Segment>

## Properties

### arn
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Output</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The Cognito User Pool ARN.
</Segment>

### id
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Output</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The Cognito User Pool ID.
</Segment>

### nodes
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Object</code>
</InlineSection>
- <p>[<code class="key">userPool</code>](#nodes-userpool)</p>
</Section>
The underlying [resources](/docs/components/#nodes) this component creates.
</Segment>
<NestedTitle id="nodes-userpool" Tag="h4" parent="nodes.">userPool</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">UserPool</code>](https://www.pulumi.com/registry/packages/aws/api-docs/cognito/userpool/)
</InlineSection>
</Section>
The Amazon Cognito User Pool.
</Segment>

## SDK

Use the [SDK](/docs/reference/sdk/) in your runtime to interact with your infrastructure.

---

### Links
This is accessible through the `Resource` object in the [SDK](/docs/reference/sdk/#links).
<Segment>
<Section type="parameters">
- <p><code class="key">id</code> <code class="primitive">string</code></p>

  The Cognito User Pool ID.
</Section>
</Segment>

## Methods

### addClient
<Segment>
<Section type="signature">
```ts
addClient(name, args?)
```
</Section>

<Section type="parameters">
#### Parameters
- <p><code class="key">name</code> <code class="primitive">string</code></p>
Name of the client.
- <p><code class="key">args?</code> [<code class="type">CognitoUserPoolClientArgs</code>](#cognitouserpoolclientargs)</p>
Configure the client.
</Section>

<InlineSection>
**Returns** [<code class="type">CognitoUserPoolClient</code>](/docs/component/aws/cognito-user-pool-client/)
</InlineSection>
Add a client to the user pool.

```ts
userPool.addClient("Web");
```
</Segment>

## CognitoUserPoolClientArgs
### transform?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Object</code>
</InlineSection>
- <p>[<code class="key">client?</code>](#transform-client)</p>
</Section>
[Transform](/docs/components#transform) how this component creates its underlying
resources.

</Segment>
<NestedTitle id="transform-client" Tag="h4" parent="transform.">client?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">UserPoolClientArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/cognito/userpoolclient/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">UserPoolClientArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/cognito/userpoolclient/#inputs)<code class="symbol">, </code><code class="primitive">opts</code><code class="symbol">: </code>[<code class="type">ComponentResourceOptions</code>](https://www.pulumi.com/docs/concepts/options/)<code class="symbol">, </code><code class="primitive">name</code><code class="symbol">: </code><code class="primitive">string</code><code class="symbol">)</code><code class="symbol"> => </code><code class="primitive">void</code>
</InlineSection>
</Section>
Transform the Cognito User Pool client resource.

</Segment>
</div>