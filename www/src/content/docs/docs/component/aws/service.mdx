---
title: Service
description: Reference doc for the `sst.aws.Service` component.
---

{/* DO NOT EDIT. AUTO-GENERATED FROM "pkg/platform/src/components/aws/service.ts" */}

import Segment from '../../../../../../src/components/tsdoc/Segment.astro';
import Section from '../../../../../../src/components/tsdoc/Section.astro';
import NestedTitle from '../../../../../../src/components/tsdoc/NestedTitle.astro';
import InlineSection from '../../../../../../src/components/tsdoc/InlineSection.astro';

<div class="tsdoc">

<Section type="about">
The `Service` component is internally used by the `Cluster` component to deploy services to
[Amazon ECS](https://aws.amazon.com/ecs/). It uses [AWS Fargate](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/AWS_Fargate.html).

:::note
This component is not meant to be created directly.
:::

This component is returned by the `addService` method of the `Cluster` component.
</Section>

---

## Constructor

<Segment>
<Section type="signature">
```ts
new Service(name, args, opts?)
```
</Section>

<Section type="parameters">
#### Parameters
- <p><code class="key">name</code> <code class="primitive">string</code></p>
- <p><code class="key">args</code> [<code class="type">ServiceArgs</code>](#serviceargs)</p>
- <p><code class="key">opts?</code> [<code class="type">ComponentResourceOptions</code>](https://www.pulumi.com/docs/concepts/options/)</p>
</Section>
</Segment>

## ServiceArgs
### architecture?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">x86_64</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">arm64</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">"x86_64"</code>
</InlineSection>
The CPU architecture of the container in this service.

```js
{
  architecture: "arm64"
}
```
</Segment>
### cluster
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">arn</code>](#cluster-arn)</p>
- <p>[<code class="key">name</code>](#cluster-name)</p>
</Section>
The cluster to use for the service.

</Segment>
<NestedTitle id="cluster-arn" Tag="h4" parent="cluster.">arn</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The ARN of the cluster.

</Segment>
<NestedTitle id="cluster-name" Tag="h4" parent="cluster.">name</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The name of the cluster.

</Segment>
### cpu?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="symbol">&ldquo;</code><code class="primitive">0.25 vCPU</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">0.5 vCPU</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">1 vCPU</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">2 vCPU</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">4 vCPU</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">8 vCPU</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">16 vCPU</code><code class="symbol">&rdquo;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">"0.25 vCPU"</code>
</InlineSection>
The amount of CPU allocated to the container in this service.

:::note
[View the valid combinations](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/fargate-tasks-services.html#fargate-tasks-size) of CPU and memory.
:::

```js
{
  cpu: "1 vCPU"
}
```
</Segment>
### environment?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Record</code><code class="symbol">&lt;</code><code class="primitive">string</code>, <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">&gt;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Key-value pairs of values that are set as [container environment variables](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/taskdef-envfiles.html).
The keys need to:
- Start with a letter
- Be at least 2 characters long
- Contain only letters, numbers, or underscores

```js
{
  environment: {
    DEBUG: "true"
  }
}
```
</Segment>
### image?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">args?</code>](#image-args)</p>
- <p>[<code class="key">context?</code>](#image-context)</p>
- <p>[<code class="key">dockerfile?</code>](#image-dockerfile)</p>
</Section>

<InlineSection>
**Default** <code class="primitive">&lcub;&rcub;</code>
</InlineSection>
Configure the docker build command for building the image.

Prior to building the image, SST will automatically add the `.sst` directory
to the `.dockerignore` if not already present.

```js
{
  image: {
    context: "./app",
    dockerfile: "Dockerfile",
    args: {
      MY_VAR: "value"
    }
  }
}
```
</Segment>
<NestedTitle id="image-args" Tag="h4" parent="image.">args?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Record</code><code class="symbol">&lt;</code><code class="primitive">string</code>, <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">&gt;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Key-value pairs of [build args](https://docs.docker.com/build/guide/build-args/) to pass to the docker build command.

```js
{
  args: {
    MY_VAR: "value"
  }
}
```
</Segment>
<NestedTitle id="image-context" Tag="h4" parent="image.">context?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">"."</code>
</InlineSection>
The path to the [Docker build context](https://docs.docker.com/build/building/context/#local-context). The path is relative to your project's `sst.config.ts`.

Change where the docker build context is located.

```js
{
  context: "./app"
}
```
</Segment>
<NestedTitle id="image-dockerfile" Tag="h4" parent="image.">dockerfile?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">"Dockerfile"</code>
</InlineSection>
The path to the [Dockerfile](https://docs.docker.com/reference/cli/docker/image/build/#file).
The path is relative to the build `context`.

Use a different Dockerfile.
```js
{
  dockerfile: "Dockerfile.prod"
}
```
</Segment>
### link?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">any</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
[Link resources](/docs/linking/) to your service. This will:

1. Grant the permissions needed to access the resources.
2. Allow you to access it in your app using the [SDK](/docs/reference/sdk/).

Takes a list of components to link to the service.

```js
{
  link: [bucket, stripeKey]
}
```
</Segment>
### logging?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">retention?</code>](#logging-retention)</p>
</Section>

<InlineSection>
**Default** <code class="primitive">&lcub; retention: "forever" &rcub;</code>
</InlineSection>
Configure the service's logs in CloudWatch.

```js
{
  logging: {
    retention: "1 week"
  }
}
```
</Segment>
<NestedTitle id="logging-retention" Tag="h4" parent="logging.">retention?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">1 day</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">3 days</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">5 days</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">1 week</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">2 weeks</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">1 month</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">2 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">3 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">4 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">5 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">6 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">1 year</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">13 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">18 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">2 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">3 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">5 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">6 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">7 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">8 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">9 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">10 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">forever</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">"forever"</code>
</InlineSection>
The duration the logs are kept in CloudWatch.

</Segment>
### memory?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="symbol">&ldquo;</code><code class="primitive">$\{number\} GB</code><code class="symbol">&rdquo;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">"0.5 GB"</code>
</InlineSection>
The amount of memory allocated to the container in this service.

:::note
[View the valid combinations](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/fargate-tasks-services.html#fargate-tasks-size) of CPU and memory.
:::

```js
{
  memory: "2 GB"
}
```
</Segment>
### permissions?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">actions</code>](#permissions-actions)</p>
- <p>[<code class="key">resources</code>](#permissions-resources)</p>
</Section>
Permissions and the resources that the service needs to access. These permissions are
used to create the service's [task role](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-iam-roles.html).

:::tip
If you `link` the service to a resource, the permissions to access it are
automatically added.
:::

Allow the service to read and write to an S3 bucket called `my-bucket`.

```js
{
  permissions: [
    {
      actions: ["s3:GetObject", "s3:PutObject"],
      resources: ["arn:aws:s3:::my-bucket/*"]
    },
  ]
}
```

Allow the service to perform all actions on an S3 bucket called `my-bucket`.

```js
{
  permissions: [
    {
      actions: ["s3:*"],
      resources: ["arn:aws:s3:::my-bucket/*"]
    },
  ]
}
```

Granting the service permissions to access all resources.

```js
{
  permissions: [
    {
      actions: ["*"],
      resources: ["*"]
    },
  ]
}
```
</Segment>
<NestedTitle id="permissions-actions" Tag="h4" parent="permissions[].">actions</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code><code class="symbol">[]</code>
</InlineSection>
</Section>
The [IAM actions](https://docs.aws.amazon.com/service-authorization/latest/reference/reference_policies_actions-resources-contextkeys.html#actions_table) that can be performed.

```js
{
  actions: ["s3:*"]
}
```
</Segment>
<NestedTitle id="permissions-resources" Tag="h4" parent="permissions[].">resources</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">[]</code>
</InlineSection>
</Section>
The resourcess specified using the [IAM ARN format](https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_identifiers.html).

```js
{
  resources: ["arn:aws:s3:::my-bucket/*"]
}
```
</Segment>
### public?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">domain?</code>](#public-domain) <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol"> | </code><code class="primitive">Object</code><code class="symbol">&gt;</code></p>
  - <p>[<code class="key">cert?</code>](#public-domain-cert)</p>
  - <p>[<code class="key">dns?</code>](#public-domain-dns)</p>
  - <p>[<code class="key">name</code>](#public-domain-name)</p>
- <p>[<code class="key">ports</code>](#public-ports) <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">[]</code><code class="symbol">&gt;</code></p>
  - <p>[<code class="key">forward?</code>](#public-ports-forward)</p>
  - <p>[<code class="key">listen</code>](#public-ports-listen)</p>
</Section>
Configure a public endpoint for the service. When configured, a load balancer
will be created to route traffic to the containers. By default, the endpoint is an
autogenerated load balancer URL.

You can also configure a custom domain for the public endpoint.

```js
{
  public: {
    domain: "example.com",
    ports: [
      { listen: "80/http" },
      { listen: "443/https", forward: "80/http" }
    ]
  }
}
```
</Segment>
<NestedTitle id="public-domain" Tag="h4" parent="public.">domain?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol"> | </code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Set a custom domain for your public endpoint.

Automatically manages domains hosted on AWS Route 53, Cloudflare, and Vercel. For other
providers, you'll need to pass in a `cert` that validates domain ownership and add the
DNS records.

:::tip
Built-in support for AWS Route 53, Cloudflare, and Vercel. And manual setup for other
providers.
:::

By default this assumes the domain is hosted on Route 53.

```js
{
  domain: "example.com"
}
```

For domains hosted on Cloudflare.

```js
{
  domain: {
    name: "example.com",
    dns: sst.cloudflare.dns()
  }
}
```
</Segment>
<NestedTitle id="public-domain-cert" Tag="h5" parent="public.domain.">cert?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The ARN of an ACM (AWS Certificate Manager) certificate that proves ownership of the
domain. By default, a certificate is created and validated automatically.

:::tip
You need to pass in a `cert` for domains that are not hosted on supported `dns` providers.
:::

To manually set up a domain on an unsupported provider, you'll need to:

1. [Validate that you own the domain](https://docs.aws.amazon.com/acm/latest/userguide/domain-ownership-validation.html) by creating an ACM certificate. You can either validate it by setting a DNS record or by verifying an email sent to the domain owner.
2. Once validated, set the certificate ARN as the `cert` and set `dns` to `false`.
3. Add the DNS records in your provider to point to the load balancer endpoint.

```js
{
  domain: {
    name: "example.com",
    dns: false,
    cert: "arn:aws:acm:us-east-1:112233445566:certificate/3a958790-8878-4cdc-a396-06d95064cf63"
  }
}
```
</Segment>
<NestedTitle id="public-domain-dns" Tag="h5" parent="public.domain.">dns?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">false</code><code class="symbol"> | </code>[<code class="type">sst.aws.dns</code>](/docs/component/aws/dns/)<code class="symbol"> | </code>[<code class="type">sst.cloudflare.dns</code>](/docs/component/cloudflare/dns/)<code class="symbol"> | </code>[<code class="type">sst.vercel.dns</code>](/docs/component/vercel/dns/)<code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">sst.aws.dns</code>
</InlineSection>
The DNS provider to use for the domain. Defaults to the AWS.

Takes an adapter that can create the DNS records on the provider. This can automate
validating the domain and setting up the DNS routing.

Supports Route 53, Cloudflare, and Vercel adapters. For other providers, you'll need
to set `dns` to `false` and pass in a certificate validating ownership via `cert`.

Specify the hosted zone ID for the Route 53 domain.

```js
{
  domain: {
    name: "example.com",
    dns: sst.aws.dns({
      zone: "Z2FDTNDATAQYW2"
    })
  }
}
```

Use a domain hosted on Cloudflare, needs the Cloudflare provider.

```js
{
  domain: {
    name: "example.com",
    dns: sst.cloudflare.dns()
  }
}
```

Use a domain hosted on Vercel, needs the Vercel provider.

```js
{
  domain: {
    name: "example.com",
    dns: sst.vercel.dns()
  }
}
```
</Segment>
<NestedTitle id="public-domain-name" Tag="h5" parent="public.domain.">name</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The custom domain you want to use.

```js
{
  domain: {
    name: "example.com"
  }
}
```

Can also include subdomains based on the current stage.

```js
{
  domain: {
    name: `${$app.stage}.example.com`
  }
}
```
</Segment>
<NestedTitle id="public-ports" Tag="h4" parent="public.">ports</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Configure the port mappings the public endpoint listens to and forwards to the service.
Supports two types of protocols:

1. Application Layer Protocols: `http` and `https`. This'll create an [Application Load Balancer](https://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html).
2. Network Layer Protocols: `tcp`, `udp`, `tcp_udp`, and `tls`. This'll create a [Network Load Balancer](https://docs.aws.amazon.com/elasticloadbalancing/latest/network/introduction.html).

:::note
If you are listening  on `https` or `tls`, you need to specify a custom `public.domain`.
:::

You can **not** configure both application and network layer protocols for the same
service.

```js
{
  public: {
    ports: [
      { listen: "80/http", forward: "8080/http" }
    ]
  }
}
```

The `forward` port and protocol defaults to the `listen` port and protocol. So in this
case both are `80/http`.

```js
{
  public: {
    ports: [
      { listen: "80/http" }
    ]
  }
}
```
</Segment>
<NestedTitle id="public-ports-forward" Tag="h5" parent="public.ports[].">forward?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\}/https</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\}/http</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\}/tcp</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\}/udp</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\}/tcp_udp</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\}/tls</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** The same port and protocol as `listen`.
</InlineSection>
The port and protocol of the container the service forwards the traffic to. Uses the
format `{port}/{protocol}`.

</Segment>
<NestedTitle id="public-ports-listen" Tag="h5" parent="public.ports[].">listen</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\}/https</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\}/http</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\}/tcp</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\}/udp</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\}/tcp_udp</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\}/tls</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The port and protocol the service listens on. Uses the format `{port}/{protocol}`.

</Segment>
### scaling?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">cpuUtilization?</code>](#scaling-cpuutilization)</p>
- <p>[<code class="key">max?</code>](#scaling-max)</p>
- <p>[<code class="key">memoryUtilization?</code>](#scaling-memoryutilization)</p>
- <p>[<code class="key">min?</code>](#scaling-min)</p>
</Section>

<InlineSection>
**Default** <code class="primitive">&lcub; min: 1, max: 1 &rcub;</code>
</InlineSection>
Configure the service to automatically scale up or down based on the CPU or memory
utilization of a container. By default, scaling is disabled and the service will run
in a single container.

```js
{
  scaling: {
    min: 4,
    max: 16,
    cpuUtilization: 50,
    memoryUtilization: 50
  }
}
```
</Segment>
<NestedTitle id="scaling-cpuutilization" Tag="h4" parent="scaling.">cpuUtilization?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">number</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">70</code>
</InlineSection>
The target CPU utilization percentage to scale up or down. It'll scale up
when the CPU utilization is above the target and scale down when it's below the target.

```js
{
  scaling: {
    cpuUtilization: 50
  }
}
```
</Segment>
<NestedTitle id="scaling-max" Tag="h4" parent="scaling.">max?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">number</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">1</code>
</InlineSection>
The maximum number of containers to scale up to.

```js
{
  scaling: {
    max: 16
  }
}
```
</Segment>
<NestedTitle id="scaling-memoryutilization" Tag="h4" parent="scaling.">memoryUtilization?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">number</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">70</code>
</InlineSection>
The target memory utilization percentage to scale up or down. It'll scale up
when the memory utilization is above the target and scale down when it's below the target.

```js
{
  scaling: {
    memoryUtilization: 50
  }
}
```
</Segment>
<NestedTitle id="scaling-min" Tag="h4" parent="scaling.">min?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">number</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">1</code>
</InlineSection>
The minimum number of containers to scale down to.

```js
{
  scaling: {
    min: 4
  }
}
```
</Segment>
### storage?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="symbol">&ldquo;</code><code class="primitive">$\{number\} GB</code><code class="symbol">&rdquo;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">"21 GB"</code>
</InlineSection>
The amount of ephemeral storage (in GB) allocated to a container in this service.

```js
{
  storage: "100 GB"
}
```
</Segment>
### transform?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Object</code>
</InlineSection>
- <p>[<code class="key">image?</code>](#transform-image)</p>
- <p>[<code class="key">listener?</code>](#transform-listener)</p>
- <p>[<code class="key">loadBalancer?</code>](#transform-loadbalancer)</p>
- <p>[<code class="key">logGroup?</code>](#transform-loggroup)</p>
- <p>[<code class="key">service?</code>](#transform-service)</p>
- <p>[<code class="key">target?</code>](#transform-target)</p>
- <p>[<code class="key">taskDefinition?</code>](#transform-taskdefinition)</p>
- <p>[<code class="key">taskRole?</code>](#transform-taskrole)</p>
</Section>
[Transform](/docs/components#transform) how this component creates its underlying
resources.

</Segment>
<NestedTitle id="transform-image" Tag="h4" parent="transform.">image?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">ImageArgs</code>](https://www.pulumi.com/registry/packages/docker/api-docs/image/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">ImageArgs</code>](https://www.pulumi.com/registry/packages/docker/api-docs/image/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the Docker Image resource.

</Segment>
<NestedTitle id="transform-listener" Tag="h4" parent="transform.">listener?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">ListenerArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/lb/listener/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">ListenerArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/lb/listener/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the AWS Load Balancer listener resource.

</Segment>
<NestedTitle id="transform-loadbalancer" Tag="h4" parent="transform.">loadBalancer?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">LoadBalancerArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/lb/loadbalancer/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">LoadBalancerArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/lb/loadbalancer/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the AWS Load Balancer resource.

</Segment>
<NestedTitle id="transform-loggroup" Tag="h4" parent="transform.">logGroup?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">LogGroupArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/cloudwatch/loggroup/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">LogGroupArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/cloudwatch/loggroup/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the CloudWatch log group resource.

</Segment>
<NestedTitle id="transform-service" Tag="h4" parent="transform.">service?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">ServiceArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/ecs/service/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">ServiceArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/ecs/service/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the ECS Service resource.

</Segment>
<NestedTitle id="transform-target" Tag="h4" parent="transform.">target?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">TargetGroupArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/lb/targetgroup/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">TargetGroupArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/lb/targetgroup/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the AWS Load Balancer target group resource.

</Segment>
<NestedTitle id="transform-taskdefinition" Tag="h4" parent="transform.">taskDefinition?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">TaskDefinitionArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/ecs/taskdefinition/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">TaskDefinitionArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/ecs/taskdefinition/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the ECS Task Definition resource.

</Segment>
<NestedTitle id="transform-taskrole" Tag="h4" parent="transform.">taskRole?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">RoleArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/iam/role/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">RoleArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/iam/role/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the ECS Task IAM Role resource.

</Segment>
### vpc
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">id</code>](#vpc-id)</p>
- <p>[<code class="key">privateSubnets</code>](#vpc-privatesubnets)</p>
- <p>[<code class="key">publicSubnets</code>](#vpc-publicsubnets)</p>
- <p>[<code class="key">securityGroups</code>](#vpc-securitygroups)</p>
</Section>
The VPC to use for the cluster.

</Segment>
<NestedTitle id="vpc-id" Tag="h4" parent="vpc.">id</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The ID of the VPC.

</Segment>
<NestedTitle id="vpc-privatesubnets" Tag="h4" parent="vpc.">privateSubnets</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
A list of private subnet IDs in the VPC. The service will be placed in the private
subnets.

</Segment>
<NestedTitle id="vpc-publicsubnets" Tag="h4" parent="vpc.">publicSubnets</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
A list of public subnet IDs in the VPC. If a service has public ports configured,
its load balancer will be placed in the public subnets.

</Segment>
<NestedTitle id="vpc-securitygroups" Tag="h4" parent="vpc.">securityGroups</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
A list of VPC security group IDs.

</Segment>

## Properties

### nodes
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Object</code>
</InlineSection>
- <p>[<code class="key">loadBalancer</code>](#nodes-loadbalancer)</p>
- <p>[<code class="key">service</code>](#nodes-service)</p>
- <p>[<code class="key">taskDefinition</code>](#nodes-taskdefinition)</p>
- <p>[<code class="key">taskRole</code>](#nodes-taskrole)</p>
</Section>
The underlying [resources](/docs/components/#nodes) this component creates.
</Segment>
<NestedTitle id="nodes-loadbalancer" Tag="h4" parent="nodes.">loadBalancer</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">LoadBalancer</code>](https://www.pulumi.com/registry/packages/aws/api-docs/lb/loadbalancer/)
</InlineSection>
</Section>
The Amazon Elastic Load Balancer.
</Segment>
<NestedTitle id="nodes-service" Tag="h4" parent="nodes.">service</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">Service</code>](https://www.pulumi.com/registry/packages/aws/api-docs/ecs/service/)
</InlineSection>
</Section>
The Amazon ECS Service.
</Segment>
<NestedTitle id="nodes-taskdefinition" Tag="h4" parent="nodes.">taskDefinition</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">TaskDefinition</code>](https://www.pulumi.com/registry/packages/aws/api-docs/ecs/taskdefinition/)
</InlineSection>
</Section>
The Amazon ECS Task Definition.
</Segment>
<NestedTitle id="nodes-taskrole" Tag="h4" parent="nodes.">taskRole</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">Role</code>](https://www.pulumi.com/registry/packages/aws/api-docs/iam/role/)
</InlineSection>
</Section>
The Amazon ECS Task Role.
</Segment>

### url
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Output</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The URL of the service.

If `public.domain` is set, this is the URL with the custom domain.
Otherwise, it's the autogenerated load balancer URL.
</Segment>

## SDK

The following are accessible through the [SDK](/docs/reference/sdk/) at runtime.

### Links
<Segment>
<Section type="parameters">
- <p><code class="key">url</code> <code class="primitive">undefined</code><code class="symbol"> | </code><code class="primitive">string</code></p>
The URL of the service.

If `public.domain` is set, this is the URL with the custom domain.
Otherwise, it's the autogenerated load balancer URL.
</Section>
</Segment>
</div>